/**
 * Copyright (C) 2006-2021 c.a.p.e. IT GmbH, https://www.cape-it.de
 * --
 * This software comes with ABSOLUTELY NO WARRANTY. For details, see
 * the enclosed file LICENSE for license information (GPL3). If you
 * did not receive this file, see https://www.gnu.org/licenses/gpl-3.0.txt.
 * --
 */

@dynamic-value-gap: @margin-small;
@dynamic-value-columns: 15rem 15rem minmax(10rem, auto) 1rem;
@dynamic-value-columns-with-options: minmax(1rem, max-content) 15rem 15rem minmax(10rem, auto) 1rem;
@dynamic-value-columns-no-operation: 15rem minmax(15rem, auto) 1rem;
@dynamic-value-columns-with-options-no-operation: minmax(1rem, max-content) 15rem minmax(15rem, auto) 1rem;

.dynamic-form-field-header {
    display: grid;
    grid-template-columns: @dynamic-value-columns;
}

.dynamic-form-field-value {
    display: grid;
    grid-template-columns: @dynamic-value-columns;
    grid-auto-columns: 1rem;
    align-items: center;
    grid-column-gap: @dynamic-value-gap;
    margin-bottom: @margin-small;
    align-items: start;
    grid-row-gap: @margin-small;
    position: relative; // necessary for dnd

    &[draggable="true"] {
        -khtml-user-drag: element;
    }

    &.dragging {
        .no-select();
        background-color: @secondary-3;
        border-radius: @border-radius;
    }

    >.drag-button {
        grid-row: 1;
        grid-column: -1;
        display: grid;
        cursor: row-resize;
        height: 1.5rem;
        align-content: center;

        >span:last-child {
            margin-top: -0.3rem;
        }
    }

    .addtional-options {
        grid-row: 2;
        grid-column: 2 /span 3;

        display: grid;
        grid-template-columns: 15rem auto;

        padding: 0 0 0 @margin-small;
    }

    &.with-options:not(.no-operation) {
        grid-template-columns: @dynamic-value-columns-with-options
    }

    &.no-operation:not(.with-options) {
        grid-template-columns: @dynamic-value-columns-no-operation;
    }

    &.with-options.no-operation {
        grid-template-columns: @dynamic-value-columns-with-options-no-operation;
    }

    .value {

        >.dynamic-form-date-input.between,
        >.dynamic-form-date-time-input,
        >.dynamic-form-number-input.between {
            grid-gap: @margin-small/2 @margin-small;

            >div {
                align-self: center;
                justify-self: center;
            }
        }

        >.dynamic-form-date-input.between,
        >.dynamic-form-number-input.between {
            display: grid;
            grid-template-columns: 1fr max-content 1fr;

        }

        >.dynamic-form-date-time-input {
            display: grid;
            grid-template-columns: 1fr 1fr;

            &.between {
                grid-template-columns: 1fr 1fr max-content 1fr 1fr;
            }
        }

        @media only screen and(max-width: 1600px) {
            >.dynamic-form-date-input.between {
                grid-template-columns: 1fr;
            }
        }

        @media only screen and (min-width: 1401px) and (max-width: 1600px) {

            >.dynamic-form-date-time-input.between {
                grid-template-columns: 1fr 1fr;

                >div {
                    grid-column: 1 / span 2;
                }
            }
        }

        @media only screen and (max-width: 1400px) {

            >.dynamic-form-date-time-input,
            >.dynamic-form-date-time-input.between {
                grid-template-columns: 1fr;
            }
        }

    }

    >.remove-value {
        cursor: pointer;
    }
}

// TODO: copied from field-cotainer
.dynamic-form-field-drop-zone {
    height: 1rem;
    background-color: @secondary-3;
    border: 1px dashed @secondary-2;
    border-radius: @border-radius;
    transition: height 0.175s, background-color 0.175s;
    margin-bottom: @margin-small;

    &.drag-over {
        height: 3rem;
        background-color: darken(@secondary-3, 10%);
    }
}