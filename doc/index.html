<!DOCTYPE HTML><html><head><title>KIX - Frontend Server documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="https://github.com/raml2html/raml2html 7.2.2"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"><script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script><script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><script type="text/javascript">
      $(document).ready(function () {
  // add chapters to sidebar
  $($('.chapter > h2').get().reverse()).each(function (i, chapter) {
    $('#sidebar ul.nav-stacked').prepend('<li>' + chapter.innerHTML + '</li>');
  });

  // add response codes to tabs
  $('h2.response-title > a').each(function (i, response) {
    $(this).parent().siblings('.response-nav').append('<a class="badge response-code" href="#' + $(this).parent().attr('id') + '">' + response.innerHTML + '</a>');
  });

  // add toggle of schema and examples
  $('.schemas.toggleable, .examples.toggleable').each(function (i, item) {
    $(this).hide();
    $(this).prev('p').append('<a class="badge toggle" href="#">' + ($(this).is(':visible') ? 'Hide' : 'Show') + '</a>');
  });
  $('.badge.toggle').click(function (e) {
    e.preventDefault();
    var $toggleElement = $(this).parents('p').next('.schemas.toggleable, .examples.toggleable');
    $toggleElement.toggle();
    $(this).html($toggleElement.is(':visible') ? 'Hide' : 'Show');
  });

  // add toggle of resource descriptions
  $('.resource-description > h4').each(function (i, item) {
    $(this).parent().hide();
    $(this).closest('.panel').prepend('<a class="description-toggle toggle" href="#" title="Show or hide description">')
    $(this).closest('.panel').children('a.description-toggle').append($(this).detach());
  });
  $('a.description-toggle').click(function (e) {
    e.preventDefault();
    var $toggleElement = $(this).parents('.panel').children('.resource-description');
    $toggleElement.toggle();
  });

  //$('.page-header pre code, .top-resource-description pre code, .modal-body pre code').each(function(i, block) {
  //  hljs.highlightBlock(block);
  //});

  $('.schemas code').each(function () {
    if ($(this).html().startsWith('{')) {
      $(this).jsonBrowse(JSON.parse($(this).html()), { collapsed: false, withQuotes: true });
    }
  });

  $('.examples code').each(function () {
    if ($(this).html().startsWith('{')) {
      $(this).jsonHighlight(JSON.parse($(this).html()));
    }
  });

  $('[data-toggle]').click(function () {
    var selector = $(this).data('target') + ' pre code';
    $(selector).each(function (i, block) {
      hljs.highlightBlock(block);
    });
  });

  // open modal on hashes like #_action_get
  $(window).bind('hashchange', function (e) {
    var anchor_id = document.location.hash.substr(1); //strip #
    var element = $('#' + anchor_id);

    // do we have such element + is it a modal?  --> show it
    if (element.length && element.hasClass('modal')) {
      element.modal('show');
    }
  });

  // execute hashchange on first page load
  $(window).trigger('hashchange');

  // remove url fragment on modal hide
  $('.modal').on('hidden.bs.modal', function () {
    try {
      if (history && history.replaceState) {
        history.replaceState({}, '', '#');
      }
    } catch (e) { }
  });
});
      /**
 * jQuery json-viewer
 * @author: Kevin Olson <acidjazz@gmail.com>
 */
(function($){

    /**
     * Check if arg is either an array with at least 1 element, or a dict with at least 1 key
     * @return boolean
     */
    function isCollapsable(arg) {
      return arg instanceof Object && Object.keys(arg).length > 0;
    }
  
    /**
     * Check if a string represents a valid url
     * @return boolean
     */
    function isUrl(string) {
       var regexp = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
       return regexp.test(string);
    }
  
    /**
     * Transform a json object into html representation
     * @return string
     */
    function json2html(json, options) {
      html = '';
      if (typeof json === 'string') {
        // Escape tags
        json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        if (isUrl(json))
          html += '<a href="' + json + '" class="json-string">' + json + '</a>';
        else
          html += '<span class="json-string">"' + json + '"</span>';
      }
      else if (typeof json === 'number') {
        html += '<span class="json-number">' + json + '</span>';
      }
      else if (typeof json === 'boolean') {
        html += '<span class="json-boolean">' + json + '</span>';
      }
      else if (json === null) {
        html += '<span class="json-null">null</span>';
      }
      else if (json instanceof Array) {
        if (json.length > 0) {
          html += '[<ol class="json-array">';
          for (var i = 0; i < json.length; ++i) {
            html += '<li>'
            // Add toggle button if item is collapsable
            if (!options.noToggle && isCollapsable(json[i])) {
                html += '<a href class="json-toggle"></a>';
            }
            html += json2html(json[i], options);
            // Add comma if item is not last
            if (i < json.length - 1) {
              html += ',';
            }
            html += '</li>';
          }
          html += '</ol>]';
        }
        else {
          html += '[]';
        }
      }
      else if (typeof json === 'object') {
        var key_count = Object.keys(json).length;
        if (key_count > 0) {
          html += '{<ul class="json-dict">';
          for (var key in json) {
            if (json.hasOwnProperty(key)) {
              html += '<li>';
              var keyRepr = options.withQuotes ?
                '<span class="json-attribute">"' + key + '"</span>' : key;
              // Add toggle button if item is collapsable
              if (!options.noToggle && isCollapsable(json[key])) {
                html += '<a href class="json-toggle">' + keyRepr + '</a>';
              }
              else {
                html += keyRepr;
              }
              html += ': ' + json2html(json[key], options);
              // Add comma if item is not last
              if (--key_count > 0)
                html += ',';
              html += '</li>';
            }
          }
          html += '</ul>}';
        }
        else {
          html += '{}';
        }
      }
      return html;
    }
  
    $.fn.jsonHighlight = function(json) {

        // jQuery chaining
        return this.each(function() {

            // Transform to HTML
            var html = json2html(json, { withQuotes: true, noToggle: true })

            // Insert HTML in target DOM element
            $(this).html(html);    
        });
    }

    /**
     * jQuery plugin method
     * @param json: a javascript object
     * @param options: an optional options hash
     */
    $.fn.jsonBrowse = function(json, options) {
      options = options || {};
  
      // jQuery chaining
      return this.each(function() {
  
        // Transform to HTML
        var html = json2html(json, options)
        if (isCollapsable(json))
          html = '<a href></a>' + html;
  
        // Insert HTML in target DOM element
        $(this).html(html);
  
        // Bind click on toggle buttons
        $(this).off('click');
        $(this).on('click', 'a.json-toggle', function() {
          var target = $(this).toggleClass('collapsed').siblings('ul.json-dict, ol.json-array');
          target.toggle();
          if (target.is(':visible')) {
            target.siblings('.json-placeholder').remove();
          }
          else {
            var count = target.children('li').length;
            var placeholder = count + (count > 1 ? ' items' : ' item');
            target.after('<a href class="json-placeholder">' + placeholder + '</a>');
          }
          return false;
        });
  
        // Simulate click on toggle button when placeholder is clicked
        $(this).on('click', 'a.json-placeholder', function() {
          $(this).siblings('a.json-toggle').click();
          return false;
        });
  
        if (options.collapsed == true) {
          // Trigger click to collapse all nodes
          $(this).find('a.json-toggle').click();
        }
      });
    };
  })(jQuery);
  
    </script><style>
      h1 {
  font-weight: bold;
}
h5 {
  font-size: 16px;
  margin-top: 30px;
  margin-bottom: 10px;
}
code {
  color: #000;
  background-color: #f0f0f0;
}
pre {
  margin-left: 8px;
  -webkit-box-shadow: 0px 0px 5px 0px rgba(150,150,150,0.75);
  -moz-box-shadow: 0px 0px 5px 0px rgba(150,150,150,0.75);
  box-shadow: 0px 0px 5px 0px rgba(150,150,150,0.75);
  background-color: #fcfcfc;
  border: 0px solid transparent;
  border-radius: 4px;
  padding: 15px;
}
pre.base-uri {
  margin-left: 0px;
}
pre > code ul.json-dict {
  margin-bottom: 0px;
}
table,
.table
.param-table {
  border-collapse: collapse;  
  border-color: #ddd;
  border: 0;
  width: 100%;
  margin-bottom: 20px;
  border: 1px solid #ddd !important;
}
table thead th,
.table thead th,
.param-table thead th {
  background-color: #fafafa;
  padding: 8px;
  border: 1px solid #ddd;
  border-bottom: 2px solid #ddd;
}
table tbody td,
.table tbody td,
.param-table tbody td {
  vertical-align: top;
  padding: 8px;
  border: 1px solid #ddd;
}
.container {
  width: 75%;
}
.hljs {
  background: transparent;
}
.parent {
  color: #999;
}
.list-group-item > .badge {
  float: none;
  margin-right: 6px;
}
.resource {
  box-shadow: 2px 2px 2px rgba(0,0,0,.1);
}
.response {
  margin-left: 20px;
  margin-bottom: 40px;
}
.response-nav {
  margin-bottom: 40px;
}
.response-nav .badge {
  color: #000;
  background-color: #d0d0d0;
  margin-right: 10px;
}
.page-header {
  padding-bottom: 0px;
  border-bottom: none;
}
.chapter {
  margin: 40px 0 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid #eee;
}
.panel-title > .methods {
  float: right;
}
.badge {
  border-radius: 4px;
  text-transform: uppercase;
  width: 70px;
  font-weight: normal;
  color: #f3f3f6;
  line-height: normal;
}
.badge_get {
  background-color: #63a8e2;
}
.badge_post {
  background-color: #6cbd7d;
}
.badge_put {
  background-color: #22bac4;
}
.badge_delete {
  background-color: #d26460;
}
.badge_patch {
  background-color: #ccc444;
}
.list-group,
.panel-group {
  margin-bottom: 0;
}
.panel-group .panel+.panel-white {
  margin-top: 0;
}
.panel-group .panel-white {
  border-bottom: 1px solid #F5F5F5;
  border-radius: 0;
}
.panel-white:last-child {
  border-bottom-color: white;
  -webkit-box-shadow: none;
  box-shadow: none;
}
.panel-white .panel-heading {
  background: white;
}
.tab-pane ul {
  padding-left: 2em;
}
.tab-pane h1 {
  font-size: 1.3em;
}
.tab-pane h2 {
  font-size: 1.2em;
  padding-bottom: 4px;
  border-bottom: 1px solid #ddd;
}
.tab-pane h3 {
  font-size: 1.1em;
}
.tab-content {
  border-left: 1px solid #ddd;
  border-right: 1px solid #ddd;
  border-bottom: 1px solid #ddd;
  padding: 10px;
}
#sidebar {
  margin-top: 30px;
  padding-right: 5px;
  padding-left: 5px;
  overflow: auto;
  height: 90%;
  border-left: 1px solid #ddd;
}
.top-resource-description {
  border-bottom: 1px solid #ddd;
}
.resource-description {
  border: 1px solid #ddd;
  border-radius: 4px;
  background: #fcfcfc;
  padding: 10px 15px;
}
.resource-description p:last-child {
  margin: 0;
}
.top-resource-description > h5:first-child,
.resource-description > h5:first-child {
  margin-top: 5px;
}
.list-group .badge {
  float: left;
}
.method-description {
  margin-left: 85px;
}
.method-description p:last-child {
  margin: 0;
}
.list-group-item {
  cursor: pointer;
}
.list-group-item:hover {
  background-color: #f5f5f5;
}
pre code {
  overflow: auto;
  word-wrap: normal;
  white-space: pre;
}
.items {
  background: #f5f5f5;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 9.5px;
  margin: 0 0 10px;
  font-size: 13px;
  line-height: 1.42857143;
}
.examples {
  margin-left: 0.5em;
}
.schemas {
  margin-left: 0.5em;
}
.resource-modal li > ul {
  margin-bottom: 1em;
}
.modal-lg {
  width: 70%;
}
.toggle {
  margin-left: 20px;
}
.nav > li > a.nav-resource {
  padding-left: 40px;
}
.uri {
  font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
  font-size: 95%;
}
      /* Syntax highlighting for JSON objects */
.json-body {
    margin: 10px 20px;
  }
  
  ul.json-dict, ol.json-array {
    list-style-type: none;
    margin: 0 0 0 1px;
    border-left: 1px dotted #ccc;
    padding-left: 2em;
    font: 13px/18px monospace;
    -webkit-font-smoothing: antialiased;
  }
  .json-string {
    color: #811f3f;
  }
  .json-number {
    color: #267f99;
  }
  .json-boolean {
    color: #0000ff;
  }
  .json-literal {
    color: #0000ff;
  }
  .json-null {
    color: #000;
  }
  .json-attribute {
    color: #0451a5;
  }
  /* Toggle button */
  a.json-toggle {
    position: relative;
    color: inherit;
    text-decoration: none;
  }
  a.json-toggle:focus {
    outline: none;
  }
  a.json-toggle:before {
    content: "\25B6"; /* left arrow */
    transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    color: #d9d9d9;
    position: absolute;
    display: inline-block;
    width: 1em;
    font-size: 10px;
    left: -1.5em;
  }
  a.json-toggle.collapsed:before {
    content: "\25B6"; /* left arrow */
    transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -webkit-transform: rotate(0deg);
    font-size: 10px;
  }
  
  /* Collapsable placeholder links */
  a.json-placeholder {
    color: #aaa;
    padding: 0 1em;
    text-decoration: none;
  }
  a.json-placeholder:hover {
    text-decoration: underline;
  }
  
    </style></head><body data-spy="scroll" data-target="#sidebar"><div class="container"><div class="row"><div class="col-md-9" role="main"><div class="page-header"><h1>KIX - Frontend Server</h1><h2></h2><div class="chapter"><h2 id="agent_portal"><a href="#agent_portal">Agent Portal</a></h2><p>The KIX Agent Portal contains a application framework, web server (REST-API) and web application in once. The server (based on <a href="https://nodejs.org">NodeJS</a>) provides a web server instance (<a href="https://expressjs.com/de/">express</a>) for http communication. Over the http default route (<code>http://&lt;fqdn&gt;:&lt;port&gt;/</code>) the web server delivers the basic web application. The web application itself is a single page application (<a href="https://en.wikipedia.org/wiki/Single-page_application">SPA</a>) and uses sockets (<a href="https://socket.io/">Socket.io</a>) to communicate with the frontend server.</p></div><div class="chapter"><h2 id="modularization___plugins"><a href="#modularization___plugins">Modularization - Plugins</a></h2><h3 id="indruction">Indruction</h3><p>The framework provides the possibility to provide functionality via plugins and with the help of extension points. One Plugin can contain several extension point.</p><p>A extension point describes a specific interface which one is needed to be implemented by the extension.</p><h3 id="structure-of-a-plugin">Structure of a Plugin</h3><ul><li><b>src</b></li><ul><li>package.json</li><li>RELEASE</li><li>locale</li><li><i>[module]</i></li><br></ul><li>README.md</li><li><i>(other files to organise the plugin, e.g. ci/cd definitions, ide configurations)</i></li></ul><p>The <strong>src</strong> folder contains the main implementation of the plugin.</p><h4 id="release-file">RELEASE File</h4><p>The RELEASE file defines the current state and the requirements of the plugin. This file is evaluated at frontend server startup and checks the dependencies from the REQUIRES field. If dependencies could not be resolved the plugin will not be available in the software.</p><table class="table"><thead><tr><th>Property</th><th>Value</th><th>Example</th></tr></thead><tbody><tr><td>PRODUCT</td><td>Name of th plugin</td><td>KIXPro</td></tr><tr><td>VERSION</td><td>String which describes the version</td><td>1 or V1</td></tr><tr><td>BUILDDATE</td><td>String with the date of build</td><td>Fri, 17 Apr 2020 07:30:54 +0200</td></tr><tr><td>BUILDNUMBER</td><td>The build number of the version</td><td>1, 3354</td></tr><tr><td>REQUIRES</td><td>Dependencies for the plugin</td><td>framework(&gt;3), backend::Maintenance</td></tr></tbody></table><p><strong>REQUIRES</strong> Following syntax is supported for the REQUIRES dependencies:</p><ul><li><strong>framework</strong> <em>(the frontend it self)</em></li><li><strong>framework(&gt;1)</strong> <em>(the frontend must be available in the specified version)</em></li><li><strong>pluginname</strong> <em>(only the name of the depending plugin; plugin must be available)</em></li><li><strong>pluginname(&gt;1)</strong> <em>(the name of the depending plugin with a version requirement; plugin must be available in the specified version; supported operators: &gt;,&lt;,=,!)</em></li><li><strong>backend</strong> <em>(the KIX backend)</em></li><li><strong>backend::pluginname</strong> <em>(this plugin must be available in KIX backend)</em></li><li><strong>backend::pluginname(&gt;1)</strong> <em>(this plugin must be available in the specified version in KIX backend)</em></li></ul><p>Example:</p><pre><code>PRODUCT = KIXPro
VERSION = 1
BUILDDATE = Fri, 17 Apr 2020 07:30:54 +0200
BUILDNUMBER = 12
REQUIRES = framework(&gt;3340), backend::KIXPro
</code></pre><h4 id="package-json-file">Package.json File</h4><p>This file contains the name of the plugin. This is important for bundling the wep application.</p><p>Example:</p><pre><code>{
"name": "KIXPro"
}
</code></pre><h4 id="locale">locale</h4><p>This folder should contain the po files for the translations if the plugin provide new translations.</p><p>Exmaple:</p><ul><li>de.po</li><li>en.po</li></ul><h4 id="-module-">[module]</h4><p>A module contains implementations for a specific context or topic (e.g. ticket, cmdb, faq, maintenance, calendar).</p><p>The following structure of a module is recommended:</p><ul><li><strong>model</strong> <em>(datamodel for the module)</em></li><li><strong>server</strong> <em>(implementations for the server side, e.g. services for KIX backend communication, socket namespaces)</em></li><li><strong>tests</strong> <em>(test implementation for the module)</em></li><li><strong>webapp</strong> <em>(implementation for the agent portal wep application)</em></li><li><strong>package.json</strong> <em>(defines the name of the module and the list of extensions)</em></li><li><strong><em>[...extension.ts]</em></strong> <em>(a specific extension implementation)</em></li></ul></div><div class="chapter"><h2 id="build___webapp"><a href="#build___webapp">Build - Webapp</a></h2><h3 id="indruction">Indruction</h3><p>After frontend server is started the web application for the agent portal is build. In this process all components and static files are collected and bundled to a web application.</p><p>The web application is implemented with the <a href="https://markojs.com/">marko</a> framework und and is bundled with the help of the framework <a href="https://github.com/lasso-js/lasso">Lasso.js</a>.</p><p>To add components or other static files to the bundling process it is required to register and implement a extension <code>IKIXModuleExtension</code>.</p><p>The extension requires to implement a property <code>webDependencies</code>. This property is an array of paths to folder where the <code>browser.json</code>-file is contained.</p><p>Example:</p><pre><code class="lang-javascript">class Extension /*...*/ {
// ...
public webDependencies: string[] = [
&#39;./icon/webapp&#39;
];
// ...
}
</code></pre><p>These paths are inserted into the main <code>browser.json</code> of the application and will be loaded by <code>Lasso.js</code> while bundling the app.</p><p>The content of the <code>browser.json</code> contains the following:</p><pre><code class="lang-json">{
"dependencies": [
"./components",
"require ./core",
"some.js",
"some.css"
]
}
</code></pre><p>There are different types of dependencies.</p><ul><li><strong>folder</strong> <em>(this is a dependency for folder. The folder has to contains also a <code>browser.json</code>)</em></li><li><strong>require</strong> <em>(this requires a folder. The has to contain a <code>index.ts</code> which exports the implementation)</em></li><li><strong>some.js</strong> (requires a specific javascript file)</li><li><strong>some.css</strong> (requires a specific style sheet)</li></ul><p>After collecting all extensions the main <code>browser.json</code> contains a list with all needed depending <code>browser.json</code> files for the web application.</p><p>Example:</p><pre><code class="lang-json">{
"dependencies": [
"./style.less",
"../../../../static/thirdparty/socket.io.js",
"../../../../modules/admin/webapp",
"../../../../modules/base-components/webapp",
"../../../../modules/bulk/webapp",
"../../../../modules/calendar/webapp",
"../../../../modules/cmdb/webapp",
"../../../../modules/customer/webapp",
"../../../../modules/dynamic-fields/webapp",
"../../../../modules/faq/webapp",
"../../../../modules/general-catalog/webapp",
"../../../../modules/home/webapp",
"../../../../modules/icon/webapp",
"../../../../modules/import/webapp",
"../../../../modules/import-export/webapp",
"../../../../modules/job/webapp",
"../../../../modules/kanban/webapp",
"../../../../modules/links/webapp",
...
]
}
</code></pre></div></div><div class="chapter"></div></div><div class="col-md-3"><div id="sidebar" class="hidden-print affix" role="complementary"><ul class="nav nav-pills nav-stacked"></ul></div></div></div></div></body></html>